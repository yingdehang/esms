<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, maximum-scale=1" />
<title>微信支付列表</title>
<link rel="stylesheet" th:href="@{/layui/css/layui.css}" />
</head>
<body>
	<div id="search" class="layui-form layui-form-pane">
		<div style="padding-bottom: 10px; border-bottom: 2px solid #5FB878">
			<h1>
				<a href="javascript:void(0)" onclick="location.reload()">微信支付列表</a>
			</h1>
		</div>
		<div class="layui-form-item layui-inline"
			style="margin-top: 15px; margin-left: 9px">
			<label class="layui-form-label">手机号</label>
			<div class="layui-input-inline">
				<input class="layui-input" id="phoneNumber" autocomplete="off" />
			</div>
		</div>
		<div class="layui-form-item layui-inline" style="margin-top: 17px">
			<label class="layui-form-label" style="width: 120px;">支付完成时间</label>
			<div class="layui-input-inline">
				<input class="layui-input" id="start1" type="text"
					placeholder="起始时间" />
			</div>
			<div class="layui-form-mid">至</div>
			<div class="layui-input-inline">
				<input class="layui-input" id="end1" type="text" placeholder="结束时间" />
			</div>
		</div>
		<div class="layui-form-item layui-inline" style="margin-top: 17px">
			<label class="layui-form-label">下单时间</label>
			<div class="layui-input-inline">
				<input class="layui-input" id="start2" type="text"
					placeholder="起始时间" />
			</div>
			<div class="layui-form-mid">至</div>
			<div class="layui-input-inline">
				<input class="layui-input" id="end2" type="text" placeholder="结束时间" />
			</div>
		</div>
		<button class="layui-btn" data-type="reload">搜索</button>
	</div>

	<table id="wechatpayList" lay-filter="operation"></table>

	<script th:src="@{/layui/layui.js}"></script>
	<script type="text/javascript">
layui.use(['table','jquery','laydate'], function(){
	var table = layui.table;
	var $ = layui.jquery;
	var laydate = layui.laydate
	laydate.render({
		elem: '#start1'
		,type: 'datetime'
	});
	laydate.render({
		elem: '#end1'
		,type: 'datetime'
	});
	laydate.render({
		elem: '#start2'
		,type: 'datetime'
	});
	laydate.render({
		elem: '#end2'
		,type: 'datetime'
	});
	<!-- 表格加载 -->
	table.render({
		elem: '#wechatpayList'
		,url: '/wechat/getwechatpayList'
		,page: true
		,cols:[[
			{title:'序号',templet: '#indexTpl'}
			,{field:'appid',title:'公众账号ID'}
			,{field:'mch_id',title:'商户号'}
			,{field:'device_info',title:'设备号'}
			,{field:'nonce_str',title:'随机字符串'}
			,{field:'sign',title:'签名'}
			,{field:'result_code',title:'业务结果'}
			,{field:'openid',title:'用户标识'}
			,{field:'trade_type',title:'交易类型'}
			,{field:'bank_type',title:'付款银行'}
			,{field:'total_fee',title:'订单金额'}
			,{field:'cash_fee',title:'现金支付金额'}
			,{field:'transaction_id',title:'微信支付订单号'}
			,{field:'out_trade_no',title:'商户订单号'}
			,{field:'time_end',title:'支付完成时间'}
			,{field:'PHONE',title:'手机号'}
			,{field:'orderTime',title:'下单时间'}
		]]
	});
	
	<!-- 监听搜索按钮 -->
	$('#search .layui-btn').on('click', function(){
		var type = $(this).data('type');
		active[type] ? active[type].call(this) : '';
	});
	<!-- 搜索时执行重载-->
	var $ = layui.$, active = {
		reload: function(){
			var phoneNumber = $('#phoneNumber');
			var start1 = $('#start1');
			var end1 = $('#end1');
			var start2 = $('#start2');
			var end2 = $('#end2');
			//执行重载
			table.reload('wechatpayList', {
				where: {
					phoneNumber: phoneNumber.val()
					,overPaystart: start1.val()
					,overPayend: end1.val()
					,orderstart:start2.val()
					,orderend:end2.val()
				}
			});
		}
	};
});
</script>
	<!-- 序号 -->
	<script type="text/html" id="indexTpl">
		{{d.LAY_TABLE_INDEX+1}}
	</script>
</body>
</html>